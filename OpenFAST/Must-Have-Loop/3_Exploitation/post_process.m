%Makes use of OpenFAst's matlab toolbox
addpath(genpath('../../matlab-toolbox')) 

% Gets the outputed binary file 
outfile = '..\1_Configuration\main.outb'; 
[dataArray,names,unitsArray] = ReadFASTbinary(outfile);  
data = array2table(dataArray) ;
data.Properties.VariableNames = names;
units  = array2table(transpose(unitsArray)) ;
units.Properties.VariableNames = names;

%Plots the data 
close all;
columnNames = {'Time','RotTorq','RtAeroFxh','BldPitch1','GenPwr'}   
letter = {'a','a','b','c','d'};
figure;
for i = 2:length(columnNames) 
    subplot(2,2,i-1); 
    hold on;
    plot(data.Time, data.(columnNames{i}));
 %title([columnNames{i} ' vs. Time']);
%     xlabel('Time');
% x_line = (11.9-10)/(15-10)*600;
% y_limits = ylim;  % Get the y-axis limits to ensure the line covers the entire plot
% plot([x_line, x_line], y_limits, 'r--', 'LineWidth', .4);

    title(letter{i});
    ylabel(columnNames{i}+" "+units.(columnNames{i}));
    xlabel("Time (s)");
%     legend([columnNames{i} ' (' units.(columnNames{i}){1} ')'], 'Location', 'southeast');
end
